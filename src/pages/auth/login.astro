---
import Layout from "@/layouts/Layout.astro";
import { LoginForm } from "@/components/auth/LoginForm";
import { createSupabaseServerInstance } from "@/lib/supabase";

// Sprawdzenie czy użytkownik jest zalogowany
const supabase = createSupabaseServerInstance({
  cookies: Astro.cookies,
  headers: Astro.request.headers,
});

const {
  data: { user },
} = await supabase.auth.getUser();

// Przekierowanie jeśli użytkownik jest zalogowany
if (user) {
  return Astro.redirect("/quotes");
}
---

<Layout title="Logowanie">
  <main class="container mx-auto px-4 py-8">
    <div class="min-h-[calc(100vh-16rem)] flex items-center justify-center">
      <LoginForm client:load />
    </div>
  </main>
</Layout>
